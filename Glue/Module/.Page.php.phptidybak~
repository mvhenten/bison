<?php
namespace Glue\Module;

require_once( dirname(__FILE__) . '/../Module.php' );
require_once( dirname(__FILE__) . '/../File.php' );

use Glue\Module;
use Glue\File;


class Page extends Module {

    protected $_color;
    protected $_title;
    protected $_file;
    protected $_attachment;

    protected $_css = '';

    protected function _build__properties() {
        $properties = array(
            'page-background-color'      => $this->color,
            'page-title'                 => $this->title,
        );

        if( $this->file ){
            $properties = array_merge( $properties, array(
                'page-background-file'       => $this->file->basename,
                'page-background-mime'       => $this->file->info->mime,
                'page-background-attachment' => $this->attachment,
            ));
        }

        return $this->_flatten( $properties );
    }

    protected function _build__color(){
        return $this->style('background-color');
    }

    protected function _build__title(){
        return $this->_element->title;
    }

    protected function _build__file(){
        if( ( $src = $this->style('background-image') ) && isset($src) ){
            return new File( $src );
        }
    }

    protected function _build__attachment(){
        return $this->style('background-attachment');
    }

}
